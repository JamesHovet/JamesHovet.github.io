<head>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-104919018-1"></script>
<script src="jquery-1.11.1.min.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-104919018-1');
</script>

<script src="https://www.gstatic.com/firebasejs/4.3.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDldSsoNPHGaSkdT1tC-TG63eojK1YhRig",
    authDomain: "thefacebook-5a6bc.firebaseapp.com",
    databaseURL: "https://thefacebook-5a6bc.firebaseio.com",
    projectId: "thefacebook-5a6bc",
    storageBucket: "thefacebook-5a6bc.appspot.com",
    messagingSenderId: "1014458253156"
  };
  firebase.initializeApp(config);
</script>
</head>

<style>

body {
    text-align: center;
    align-items: center;
}

input {
    width: 250px;
}

a {
    margin: 20px;
    font-size: 1.2em;
}

</style>

<script>
    var emails = {"wcapen22@groton.org": "4387700", "lcaspersen22@groton.org": "4387695", "jehrgott22@groton.org": "4387585", "selhadj22@groton.org": "4387642", "peldredge22@groton.org": "4387677", "eferrucci22@groton.org": "4387707", "jgura22@groton.org": "4387603", "rhahami22@groton.org": "4387662", "chall22@groton.org": "4387636", "rhuntington22@groton.org": "4387647", "ajohnson22@groton.org": "4387703", "akirchner22@groton.org": "4387694", "alee22@groton.org": "4387579", "aley22@groton.org": "4387671", "eli22@groton.org": "4387710", "jlin22@groton.org": "4447669", "plynch22@groton.org": "4387689", "cmessina22@groton.org": "4387667", "kodonnell22@groton.org": "4387683", "apowell22@groton.org": "4387583", "jrogers22@groton.org": "4387681", "sspence22@groton.org": "4387690", "jsperling22@groton.org": "4387675", "mvarkey22@groton.org": "4387697", "fviacavavera22@groton.org": "4387712", "tweisberg22@groton.org": "4387602", "aagarwal21@groton.org": "4387691", "bagbi21@groton.org": "3909582", "sagrawal21@groton.org": "4387631", "lbenedict21@groton.org": "4387564", "jbolton21@groton.org": "3909594", "nbowden21@groton.org": "4387615", "abrown21@groton.org": "4387611", "tburgin21@groton.org": "4387699", "tcampbell21@groton.org": "4444996", "ychang21@groton.org": "4387566", "kclark21@groton.org": "3909602", "zcolloredomansfeld21@groton.org": "4387688", "cdane21@groton.org": "3939379", "hdavis21@groton.org": "3909608", "sdennin21@groton.org": "4387657", "idesrosiers21@groton.org": "4387661", "odillon21@groton.org": "4387560", "rdoherty21@groton.org": "3909611", "cdrapeau21@groton.org": "4387592", "mferris21@groton.org": "4387610", "agarcia21@groton.org": "4387637", "jgolden21@groton.org": "4387609", "lgordon21@groton.org": "4387679", "ahanitchak21@groton.org": "3909630", "cholding21@groton.org": "3909630", "dhu21@groton.org": "4387651", "ahuo21@groton.org": "4444995", "ahyde21@groton.org": "4387680", "jjin21@groton.org": "4011146", "ejunkala21@groton.org": "4387630", "akarr21@groton.org": "4387576", "kkeegan21@groton.org": "3909641", "lkempczinski21@groton.org": "3909642", "gkingsland21@groton.org": "4387686", "aklema21@groton.org": "4387574", "alee21@groton.org": "4387559", "nleeheberling21@groton.org": "3909649", "nley21@groton.org": "4387577", "hliao21@groton.org": "4387581", "rlong21@groton.org": "3909657", "amckeown21@groton.org": "4387704", "tmecenas21@groton.org": "4387619", "dmeehan21@groton.org": "3909664", "smiller21@groton.org": "4387580", "gmumford21@groton.org": "4387713", "mmurrin21@groton.org": "3909669", "cnevard21@groton.org": "4387632", "onwaokoro21@groton.org": "3909672", "aoconnell21@groton.org": "4387573", "coelhafen21@groton.org": "3909673", "joh21@groton.org": "3909673", "aoleary21@groton.org": "4387578", "rpalakkal21@groton.org": "4387600", "jpark21@groton.org": "3909676", "zpark21@groton.org": "3909677", "aparra21@groton.org": "4387601", "jpedreschi21@groton.org": "4387702", "epolynice21@groton.org": "4387618", "lpothel21@groton.org": "4444991", "cpotter21@groton.org": "3909684", "squigley21@groton.org": "4387676", "aromano21@groton.org": "4086297", "nsalander21@groton.org": "4387606", "asankoh21@groton.org": "4387653", "ksapinski21@groton.org": "4387563", "eschiavone21@groton.org": "4387698", "tsmith21@groton.org": "3909698", "rstankard21@groton.org": "3909699", "asteinert21@groton.org": "4387696", "cthibodeau21@groton.org": "4387659", "rthorndike21@groton.org": "3909705", "ethors21@groton.org": "4387693", "wthors21@groton.org": "4387685", "gtravis21@groton.org": "4387588", "cwardrop21@groton.org": "4387588", "fwaxman21@groton.org": "4387687", "awei21@groton.org": "4387687", "hwinterer21@groton.org": "4387582", "hwise21@groton.org": "4387708", "hworthington21@groton.org": "4387596", "ywu21@groton.org": "4387596", "nwyman21@groton.org": "4387614", "tzhai21@groton.org": "4387706", "nzhang21@groton.org": "4387607", "lzheng21@groton.org": "4387587", "nagarwal20@groton.org": "3909580", "aali20@groton.org": "3909584", "aalijani20@groton.org": "3909585", "jallinggraney20@groton.org": "3420256", "daltshuler20@groton.org": "3909586", "banderson20@groton.org": "3909587", "landerson20@groton.org": "3420258", "pbaffourawuah20@groton.org": "3909588", "ebeard20@groton.org": "3909590", "nbeck20@groton.org": "3909591", "lbeckstein20@groton.org": "3909592", "cberan20@groton.org": "3420261", "mborghi20@groton.org": "3420263", "ibrown20@groton.org": "3937109", "lbululu20@groton.org": "3420269", "gcanca20@groton.org": "4387646", "tcarlin20@groton.org": "3420271", "kcarney20@groton.org": "3431236", "cchang20@groton.org": "3909600", "dchang20@groton.org": "3909601", "ychen20@groton.org": "3939395", "ycho20@groton.org": "3420276", "kclark20@groton.org": "3420279", "ccoleman20@groton.org": "3420280", "mcollins20@groton.org": "3431880", "acopeland20@groton.org": "3909619", "mculcasi20@groton.org": "3909607", "edeng20@groton.org": "3909610", "edollard20@groton.org": "3420285", "jdonovan20@groton.org": "4387604", "ydu20@groton.org": "4387589", "edunn20@groton.org": "3909615", "fengstrom20@groton.org": "3448528", "hfaugas20@groton.org": "4387669", "afey20@groton.org": "3909616", "jfitzgerald20@groton.org": "3909618", "egirian20@groton.org": "3420289", "agogineni20@groton.org": "3937746", "jgoodrich20@groton.org": "4387709", "lgraham20@groton.org": "3420293", "jguo20@groton.org": "3420297", "jhahami20@groton.org": "4387668", "ahayes20@groton.org": "3976220", "hhodde20@groton.org": "4387656", "cilozor20@groton.org": "3939412", "wirving20@groton.org": "3420301", "gjohnson20@groton.org": "3909636", "kjohnson20@groton.org": "3909637", "mkandel20@groton.org": "4387608", "akaneb20@groton.org": "3909639", "akauffman20@groton.org": "3909640", "akocks20@groton.org": "3909643", "hkuck20@groton.org": "3420311", "jlee20@groton.org": "4387595", "jleung20@groton.org": "4387569", "rlipson20@groton.org": "3909652", "clocke20@groton.org": "3909656", "gmastroianni20@groton.org": "3909659", "amazza20@groton.org": "3909660", "emcnamara20@groton.org": "4387665", "jmichaud20@groton.org": "3420326", "omonarrez20@groton.org": "3909666", "jnam20@groton.org": "3420330", "jobrien20@groton.org": "3420332", "konwochei20@groton.org": "3932408", "tpike20@groton.org": "3932408", "rpillai20@groton.org": "3909681", "aporter20@groton.org": "3420341", "epowers20@groton.org": "3420343", "jrainey20@groton.org": "4387645", "mreiss20@groton.org": "3909689", "kreveno20@groton.org": "4444990", "aschade20@groton.org": "3909694", "fscott20@groton.org": "3909695", "msteinert20@groton.org": "3909701", "kstovall20@groton.org": "3420366", "mstrong20@groton.org": "3909702", "wstuart20@groton.org": "3909703", "gthors20@groton.org": "3909706", "oting20@groton.org": "3909707", "ptrigg20@groton.org": "3909709", "eturner20@groton.org": "3936998", "cwahba20@groton.org": "3909711", "cwilcox20@groton.org": "3909717", "oye20@groton.org": "3909723", "bzaidel20@groton.org": "3420387", "jalam19@groton.org": "3257274", "cbanwell19@groton.org": "3257277", "tbrooks19@groton.org": "3420265", "abrown19@groton.org": "3420266", "kbrown19@groton.org": "3431790", "mbruni19@groton.org": "3420267", "aburke19@groton.org": "3257280", "mcarney19@groton.org": "3909597", "lcaspersen19@groton.org": "3420273", "jcheeks19@groton.org": "3257287", "echo19@groton.org": "3420277", "hchung19@groton.org": "3257290", "sconner19@groton.org": "3420281", "sconroy19@groton.org": "3287365", "bcornell19@groton.org": "3556335", "lcratsley19@groton.org": "3420282", "idas19@groton.org": "3257295", "wdavey19@groton.org": "3420283", "ldelaney19@groton.org": "3257298", "mfernandez19@groton.org": "3257298", "tgardiner19@groton.org": "3909621", "dghebremedhin19@groton.org": "3420288", "sglawe19@groton.org": "3909626", "jgold19@groton.org": "3909627", "egomila19@groton.org": "3420290", "bgorton19@groton.org": "3420291", "ggund19@groton.org": "3420295", "lgund19@groton.org": "3420296", "bhan19@groton.org": "3420298", "ahillios19@groton.org": "3431798", "ghui19@groton.org": "3257309", "fhyde19@groton.org": "3431898", "yiwasaki19@groton.org": "3909633", "ajin19@groton.org": "3257313", "ajohnson19@groton.org": "3420303", "nkader19@groton.org": "4387635", "jkendall19@groton.org": "4129971", "rkhanna19@groton.org": "3420307", "jkim19@groton.org": "3097192", "skim19@groton.org": "3420308", "akirk19@groton.org": "3420309", "jkissell19@groton.org": "3257317", "akogler19@groton.org": "3420310", "jleeheberling19@groton.org": "3420315", "alei19@groton.org": "3430563", "sli19@groton.org": "3282755", "hlivermore19@groton.org": "3420318", "elord19@groton.org": "3420320", "alu19@groton.org": "3257322", "mlu19@groton.org": "3257321", "flynch19@groton.org": "3257323", "vmalashenko19@groton.org": "3608158", "rmalhotra19@groton.org": "3420323", "fmalik19@groton.org": "3472880", "ematthews19@groton.org": "3420324", "smcavoy19@groton.org": "3435272", "lmcmahon19@groton.org": "3909663", "rmeehan19@groton.org": "3257331", "knikoi19@groton.org": "3420331", "aogunsanya19@groton.org": "3420335", "aorr19@groton.org": "3257340", "spark19@groton.org": "3257342", "sperchuk19@groton.org": "4388083", "npollis19@groton.org": "4387654", "cpontifell19@groton.org": "3282758", "sredjali19@groton.org": "3420345", "creiss19@groton.org": "3420346", "mriggs19@groton.org": "3420347", "drodriguez19@groton.org": "3420349", "tryan19@groton.org": "3420353", "fsaldivar19@groton.org": "3909691", "ksanford19@groton.org": "3257355", "gschiavone19@groton.org": "3420357", "gscholl19@groton.org": "3257357", "yshi19@groton.org": "3909697", "bslawaska19@groton.org": "4387663", "bsmith19@groton.org": "3420360", "msolomon19@groton.org": "3420361", "jstankard19@groton.org": "3257359", "nsteinert19@groton.org": "3420364", "jsullivan19@groton.org": "3431978", "csznip19@groton.org": "3420369", "atambo19@groton.org": "4387655", "ktantichot19@groton.org": "3257361", "ftobeason19@groton.org": "3420373", "ltoce19@groton.org": "3420374", "wtorriani19@groton.org": "4387643", "avrattos19@groton.org": "3420376", "hweatherly19@groton.org": "3257367", "jwilmerding19@groton.org": "3420378", "jwilson19@groton.org": "3420379", "bxiao19@groton.org": "3420382", "ayang19@groton.org": "3909722", "rzeid19@groton.org": "3420388", "naaron18@groton.org": "3420255", "galtshuler18@groton.org": "3257276", "abaharozian18@groton.org": "3097186", "abeckstein18@groton.org": "3257278", "bcalareso18@groton.org": "3257281", "lcalder18@groton.org": "3909596", "bcalmas18@groton.org": "3257282", "ncarbajal18@groton.org": "3257283", "bcardinal18@groton.org": "3097194", "rcarr18@groton.org": "3097143", "ccarson18@groton.org": "3257284", "gcassamajor18@groton.org": "3257285", "lchatfield18@groton.org": "3257286", "mcheever18@groton.org": "3257288", "jcheng18@groton.org": "3605273", "jcollins18@groton.org": "3257292", "acmansfeld18@groton.org": "3257293", "lcombs18@groton.org": "3257294", "ndavid18@groton.org": "3257296", "ydavidoff18@groton.org": "3097129", "gdespres18@groton.org": "3257299", "bdonohue18@groton.org": "3097193", "kduenez18@groton.org": "3939367", "eegwuekwe18@groton.org": "3257301", "mfey18@groton.org": "3257303", "tforbes18@groton.org": "3257304", "mfrench18@groton.org": "3097171", "jfulton18@groton.org": "3420287", "ogaye18@groton.org": "3097191", "rgil18@groton.org": "3257306", "sgirian18@groton.org": "3097198", "rgrewal18@groton.org": "3257307", "dherdiech18@groton.org": "3097159", "mherdiech18@groton.org": "3097158", "thoopes18@groton.org": "3257308", "jhovet18@groton.org": "3097118", "mhyde18@groton.org": "3257310", "jjiang18@groton.org": "3257312", "ajoyce18@groton.org": "3468642", "mklein18@groton.org": "3097168", "jlamson18@groton.org": "3257318", "slee18@groton.org": "3257319", "mlipkin18@groton.org": "3608174", "rlovell-smith18@groton.org": "3257320", "smalhotra18@groton.org": "3257324", "pmalone18@groton.org": "3257325", "mmaxson18@groton.org": "3257328", "jmccalmon18@groton.org": "3257329", "lmcdermott18@groton.org": "3097172", "imcgregor18@groton.org": "3257330", "lmckeown18@groton.org": "3097131", "pmichaud18@groton.org": "3257332", "bmilliken18@groton.org": "3131665", "jmontima18@groton.org": "3257333", "anewsome18@groton.org": "3257336", "anguyen18@groton.org": "3257337", "nnorton18@groton.org": "3097124", "coei18@groton.org": "3097121", "joei18@groton.org": "3257339", "cpark18@groton.org": "3257341", "spark18@groton.org": "3257343", "cpearce18@groton.org": "3420340", "apearson18@groton.org": "3257344", "apeters18@groton.org": "3257345", "npierce18@groton.org": "3257347", "opotter18@groton.org": "3257348", "jqiao18@groton.org": "3257349", "arasetti18@groton.org": "3257352", "areilly18@groton.org": "3257353", "msabatelle18@groton.org": "3257354", "rsantry18@groton.org": "3257356", "cschmitt18@groton.org": "3420358", "gsegal18@groton.org": "3909696", "csenko18@groton.org": "3257358", "dshin18@groton.org": "3097176", "tsteere18@groton.org": "3933859", "csun18@groton.org": "3257360", "rvarkey18@groton.org": "3097178", "cvrattos18@groton.org": "3257363", "ewalsh18@groton.org": "3257364", "awaxman18@groton.org": "3257366", "kxiao18@groton.org": "3257368", "mxiao18@groton.org": "3257369", "eyang18@groton.org": "3420383", "hzhai18@groton.org": "3097184", "bzhang18@groton.org": "3097180"}

</script>

<body>

    <header>
        <h1 style="color: #8C1217; margin-top: 120px;">theFacebook</h1>
    </header>

    <div style="display:none;" id="playDiv">

        <h2 id="welcome">Welcome, <span id="displayName"></span></h2>

        <a href="./play.html">Play</a>
        <br>
        <a href="./leaderboard.html">Leaderboard</a>
        <br>
        <a href="#" id="signOut" onclick="signOut();">Sign Out</a>

    </div>

    <div style="display:none;" id="loginDiv">
        <div id="emailSignIn">
            <input id="email" type="email" placeholder="groton email">
            <br>
            <input id="password" type="password" placeholder="any password you like">
            <br>
            <input id="emailCreate" type="button" value="Play" onclick="emailCreate();" />
            <br>
            <p>Already signed up?</p>
            <input id="emailSignIn" type="button" value="Log back in" onclick="emailSignIn();" />
            <br>
        </div>

        <br>
    </div>

</body>

<script>

$("#password").keyup(function(event){
    if(event.keyCode == 13){
        $("#emailCreate").click();
    }
});

$("#email").focus()

loginDiv = document.getElementById('loginDiv')
playDiv = document.getElementById('playDiv')

var uid

firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
        // User is signed in.
        var displayName = user.displayName || user.email
        uid = user.uid;

        nameSpan = document.getElementById('displayName')
        nameSpan.innerText = displayName

        playDiv.style.display = "block"
        loginDiv.style.display = "none"

        // ...
    } else {
        // User is signed out.
        // ...

        console.log("else")

        //draw login screen
        loginDiv.style.display = "block"
        playDiv.style.display = "none"


    }
});

function emailSignIn(){
    email = document.getElementById('email').value
    password = document.getElementById('password').value

    if(email && password){
        firebase.auth().signInWithEmailAndPassword(email, password)
            .catch(function(err) {

            incorrectErrorElement = document.createElement("p").innerText = err.message
            document.getElementById('emailSignIn').append(incorrectErrorElement)

            });
    }
}

function emailCreate(){
    email = document.getElementById('email').value
    password = document.getElementById('password').value

    if(email && password && email.includes("@groton.org")){
        firebase.auth().createUserWithEmailAndPassword(email, password)
            .catch(function(err) {

                incorrectErrorElement = document.createElement("p").innerText = err.message
                document.getElementById('emailSignIn').append(incorrectErrorElement)
            // Handle errors
        }).then(() => {
            user = firebase.auth().currentUser

            usersRef = firebase.database().ref("users")
            userRef = usersRef.child(user.uid)

            infoDict = {
                email: user.email
            }

            if(emails[user.email]){
                infoDict["imgNumber"] = emails[user.email]
            }

            userRef.child("userData").set(infoDict)

            userRef.child("accuracyData").set({"accuracy" : 0})
        })

    } else {
        incorrectErrorElement = document.createElement("p").innerText = "Need @groton.org email and valid password"

        document.getElementById('emailSignIn').append(incorrectErrorElement)
    }
}

function signOut(){
    firebase.auth().signOut()
}

</script>
